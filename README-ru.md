# Установка Arch Linux
Arch Linux - это гибкая и настраиваемая операционная система. У этого есть кое-что для всех. Однако основным сдерживающим фактором для людей является отсутствие графического интерфейса установки. Это означает, что терминал должен использоваться для этого процесса. В этом руководстве я расскажу вам об установке этой операционной системы с нуля.

## Получение установочного носителя
Перейдите на https://www.archlinux.org/download/ и выберите зеркало, которое закрывается для вас (США внизу.) Выберите один из них (не имеет значения, какой именно). Вы попадете на страницу, заполненную множеством различных гиперссылок. Выберите тот, который говорит archlinux-x.x.x-x86_64.iso, где x.x.x - самая последняя дата. Это загрузит файл ~ 600 МБ, что может занять некоторое время.

## Настройка
Я буду использовать virtualbox для этого урока, но он должен работать и для физических жестких дисков. Я буду использовать жесткий диск на 20 ГБ, но, пожалуйста, отрегулируйте значения до того размера, который у вас есть.

### Короткая сторона для virtualbox
После того, как вы создали свою виртуальную машину, вам нужно перейти в «Настройки» -> «Хранилище» и в разделе «Контроллер: IDE» выбрать кружок со знаком плюс, а затем «Выбрать диск». Теперь выберите файл ISO, который вы только что загрузили.

### Коротко об установке для установки на физическое оборудование.
Возможно, вам потребуется найти драйверы, специфичные для вашей [карты Wi-Fi] (https://wiki.archlinux.org/index.php/Wireless_network_configuration) и графической карты ([NVIDIA] (https://wiki.archlinux.org/index). .php / Wireless_network_configuration), [AMD] (https://wiki.archlinux.org/index.php/AMDGPU) и [Intel] (https://wiki.archlinux.org/index.php/intel_graphics). Если Вам нужен любой из этих драйверов, я бы рекомендовал прочитать ВСЮ страницу.)

## Монтаж
### Запуск
При запуске системы выберите «Boot Arch Linux». В интерфейсе командной строки (CLI) убедитесь, что ваш Ethernet работает, и введите `ping www.google.com`. Нажмите CTRL + C, чтобы остановить его.
### Разделение дисков
#### Базовая система разбиения
Я буду использовать один раздел для своего хранилища, но вы можете управлять им так, как хотите. Обычной стратегией является использование отдельных разделов / tmp, / mnt и / home. Для начала введите `fdisk -l` и укажите диск, который вы хотите использовать. В моем случае это / dev / sda, что составляет 20 ГБ. У вас будет / dev / loop0, но вы можете игнорировать это, это просто ваш установочный носитель. Теперь я наберу `cfdisk`, чтобы запустить программу управления разделами. В меню используйте клавиши со стрелками, чтобы выбрать тип этикетки «dos». Нажмите Enter, появится второе меню. В левом нижнем углу измените значение на один ГБ в соответствии с показом. Для меня показанное значение составляет 20G, поэтому я изменю его на 19G, а затем нажму Enter. Выберите «основной», а затем нажмите стрелку влево, и выберите «вариант загрузки». Нажмите стрелку вниз, чтобы выбрать свободное место, и нажмите «новый» 1023M должен отображаться в качестве суммы. Нажмите ввод и снова выберите «основной». Идите направо и нажмите «написать», после этого вам нужно будет набрать «да». Теперь нажмите кнопку «Выйти». Введите `fdisk -l` еще раз, чтобы убедиться, что изменения действительно сохранены. Теперь должны быть / dev / sda1 и / dev / sda2. Чтобы сделать разделы пригодными для использования, введите `mkfs.ext4 / dev / sda1` и` mkswap / dev / sda2`. Чтобы использовать раздел подкачки, введите `swapon / dev / sda2`.
#### Более продвинутые системы разбиения
Если вы хотите использовать более сложные разделы, такие как отдельные разделы для / mnt, / tmp и т. Д., Вам нужно будет выполнить следующие шаги и настроить их в соответствии со своими действиями. Здесь я настрою разделы на наличие отдельных файлов / mnt, / tmp, / home и / boot. `Cfdisk`. Затем я создам здесь четыре (не забывайте о вашем пространстве подкачки!) Нужного мне размера и, конечно, установлю загрузочный флаг раздела, который будет содержать папку / boot. [Arch wiki] (https://wiki.archlinux.org/index.php/installation_guide#Partition_the_disks) содержит отличное руководство по подходящим размерам различных разделов. Затем я выполню команду `mkfs.ext * / dev / sdXX` (где * обозначает любую файловую систему, которую вы используете, а XX обозначает конец диска с помощью команды / dev / sda3), а также` Команды mkswap / dev / sdXX` и `swapon / dev / sdXX` заставляют раздел подкачки выполнять свою работу. Теперь нам нужно смонтировать `/` partition `mount / dev / sdXX / mnt`, а затем создать любые файлы, которые вам нужны здесь. Я буду запускать `mkdir / mnt / tmp`,` mkdir / mnt / boot`, `mkdir / mnt / mnt` (это создаст файл` / mnt` в установленной системе) и, наконец, `mkdir / mnt / home `. Тогда мне нужно будет смонтировать все диски на этих файлах. `mount / dev / sdXX / mnt / {boot, tmp, home, mnt}` должен работать (когда вы запускаете эту команду отдельно для разделов boot, tmp, home и mnt.) Теперь вы сможете продолжить Процесс установки здесь нормально.

### Фактическая установка
Теперь, когда у нас есть настройка разделов, мы установим систему. `pacstrap / mnt base base-devel` сделает это. В зависимости от скорости вашего интернета и скорости жесткого диска это может занять некоторое время. После завершения работы pacstrap мы сгенерируем fstab `genfstab -U / mnt >> /mnt`.

### Последние штрихи
Чтобы закончить, мы перейдем к нашей новой системе. `arch-chroot / mnt / bin / bash`.
#### Установка часов
Чтобы найти доступные местоположения, введите `ls / usr / share / zoneinfo`. Есть список регионов. `ls / usr / share / zoneinfo / Europe` предоставит список всех крупных городов региона. Чтобы установить часы, мы набираем `ln -sf / usr / share / zoneinfo / Europe / Riga / etc / localtime`. Теперь, чтобы установить аппаратные часы, `hwclock --systohc --utc`.
#### Настройка локали
Локаль - это язык и раскладка клавиатуры. Запустите `nano / etc / locale.gen` и раскомментируйте (удалите #) свою раскладку. Стандартная американская клавиатура - en_us.UTF-8 UTF-8. `locale-gen` сгенерирует локаль. `echo LANG = en_US.UTF-8> / etc / locale.conf` установит для языка стандартный американский английский. `export LANG = en_US.UTF-8` снова установит язык.
#### Имя хоста
`echo arch-linux> / etc / hostname` установит в качестве имени хоста значение arch-linux.
#### GRUB
`pacman -S grub` установит grub. `grub-install / dev / sda` позволит grub исследовать жесткие диски, чтобы найти загрузочные разделы. `grub-mkconfig -o / boot / grub / grub.cfg` сгенерирует файл конфигурации grub, который позволит системе загружаться.
#### Пользователь
Добавление стандартного пользователя обязательно. `useradd -m -G wheel -s / bin / bash <username>` добавит пользователя. `passwd <username>` изменит пароль пользователя root. `пароль root` изменяет пароль root. Вы ДОЛЖНЫ запустить это, иначе ваша система будет очень уязвимой.
#### Сеть
`systemctl enable systemd-networkd` позволит менеджеру сети запускаться при запуске. Добавление `nameserver <DNS server>` в `/ etc / resolv.conf` позволит вам настроить свой DNS-сервер.
#### Установка интерфейса рабочего стола
Я покажу, как установить GNOME и XFCE. `pacman -S xorg lightdm lightdm-gtk-greeter` будет использоваться для обоих, так что вы можете пойти дальше и запустить его. `pacman -S xfce4 xfce4-goodies` устанавливает xfce, а` pacman -S gnome gnome-extra` устанавливает GNOME. Вам нужно будет выполнить команду `systemctl enable lightdm.service`.
#### Аудио
Если вы хотите аудио, запустите `pacman -S alsa-utils pulseaudio-alsa`, а затем` systemctl enable lightdm.service`.

## Спасибо за чтение!
